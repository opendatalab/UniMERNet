<div align="center">

[English](./README.md) | ç®€ä½“ä¸­æ–‡ | [æ—¥æœ¬èª](./README-ja.md)

<h1>UniMERNet: ä¸€ä¸ªç”¨äºçœŸå®ä¸–ç•Œæ•°å­¦è¡¨è¾¾å¼è¯†åˆ«çš„é€šç”¨ç½‘ç»œ</h1>

[[ è®ºæ–‡ ]](https://arxiv.org/abs/2404.15254) [[ ç½‘ç«™ ]](https://github.com/opendatalab/UniMERNet/tree/main) [[ æ•°æ®é›† (OpenDataLab)]](https://opendatalab.com/OpenDataLab/UniMER-Dataset) [[ æ•°æ®é›† (Hugging Face) ]](https://huggingface.co/datasets/wanderkid/UniMER_Dataset)

[[æ¨¡å‹ ğŸ¤—(Hugging Face)]](https://huggingface.co/wanderkid/unimernet_base)
[[æ¨¡å‹ <img src="./asset/images/modelscope_logo.png" width="20px">(ModelScope)]](https://www.modelscope.cn/models/wanderkid/unimernet_base)

ğŸ”¥ğŸ”¥ğŸ”¥ [CDM: ä¸€ç§å…¬å¹³ã€å‡†ç¡®çš„å¯ä¿¡å…¬å¼è¯†åˆ«è¯„æµ‹æŒ‡æ ‡](https://github.com/opendatalab/UniMERNet/tree/main/cdm)

</div>

æ¬¢è¿æ¥åˆ° UniMERNet çš„å®˜æ–¹ä»“åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªå°†æ•°å­¦è¡¨è¾¾å¼å›¾åƒè½¬æ¢ä¸º LaTeX çš„è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºå„ç§çœŸå®ä¸–ç•Œåœºæ™¯ã€‚

## æ–°é—» ğŸš€ğŸš€ğŸš€
**2025.09.28** ğŸ‰ğŸ‰  CDM æ”¯æŒå¹¶ä¼˜åŒ–äº†ä¸­æ–‡å…¬å¼çš„æ¸²æŸ“ã€‚  
**2025.03.25** ğŸ‰ğŸ‰  <font color="red">å…¬å¼è¯†åˆ«æ–°æŒ‡æ ‡[CDM](https://arxiv.org/abs/2409.03643) è®ºæ–‡å·²è¢«CVPR 2025æ¥æ”¶ï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨ã€‚</font>     
**2024.09.06** ğŸ‰ğŸ‰  UniMERNet ç‰ˆæœ¬æ›´æ–°ï¼Œè®­ç»ƒä»£ç å¼€æºï¼Œæ–°ç‰ˆæœ¬æ¨¡å‹æ›´å°ï¼Œé€Ÿåº¦æ›´å¿«ã€‚å…·ä½“è§æœ€æ–°ç‰ˆæœ¬è®ºæ–‡[UniMERNet](https://arxiv.org/abs/2404.15254)ã€‚  
**2024.09.06** ğŸ‰ğŸ‰  æå‡ºå…¬å¼è¯†åˆ«æ–°æŒ‡æ ‡[CDM](https://github.com/opendatalab/UniMERNet/tree/main/cdm)ï¼Œç›¸æ¯”äºBLEU/EditDistanceï¼ŒCDMè¯„æµ‹å¾—åˆ†æ›´åŠ ç›´è§‚ï¼Œå‡†ç¡®ï¼Œå¯ä»¥å…¬å¹³å¯¹æ¯”ä¸åŒæ¨¡å‹æ€§èƒ½ï¼Œä¸å—å…¬å¼å¤šæ ·æ€§è¡¨è¾¾å½±å“ã€‚  
**2024.07.21** ğŸ‰ğŸ‰  åŸºäº [PDF-Extract-Kit](https://github.com/opendatalab/PDF-Extract-Kit) MFD æ¨¡å‹ï¼Œæ·»åŠ äº†æ•°å­¦å…¬å¼æ£€æµ‹ (MFD) æ•™ç¨‹ã€‚    
**2024.06.06** ğŸ‰ğŸ‰  å¼€æºäº† UniMER æ•°æ®é›†çš„è¯„ä¼°ä»£ç ã€‚  
**2024.05.06** ğŸ‰ğŸ‰  å¼€æºäº† UniMER æ•°æ®é›†ï¼ŒåŒ…æ‹¬ç”¨äºæ¨¡å‹è®­ç»ƒçš„ UniMER-1M å’Œç”¨äº MER è¯„ä¼°çš„ UniMER-Testã€‚  
**2024.05.06** ğŸ‰ğŸ‰  æ·»åŠ äº† Streamlit å…¬å¼è¯†åˆ«æ¼”ç¤ºï¼Œå¹¶æä¾›äº†æœ¬åœ°éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚  
**2024.04.24** ğŸ‰ğŸ‰  è®ºæ–‡ç°åœ¨å¯ä»¥åœ¨ [ArXiv](https://arxiv.org/abs/2404.15254) ä¸ŠæŸ¥çœ‹ã€‚  
**2024.04.24** ğŸ‰ğŸ‰  å‘å¸ƒäº†æ¨ç†ä»£ç å’Œæ£€æŸ¥ç‚¹ã€‚  

## æ¼”ç¤ºè§†é¢‘
https://github.com/opendatalab/UniMERNet/assets/69186975/ac54c6b9-442c-48b0-95f9-a4a3fce8780b

https://github.com/opendatalab/UniMERNet/assets/69186975/09b71c55-c58a-4792-afc1-d5774880ccf8

## å¿«é€Ÿå¼€å§‹

### å…‹éš†ä»“åº“å¹¶ä¸‹è½½æ¨¡å‹
```bash
git clone https://github.com/opendatalab/UniMERNet.git
```

```bash
cd UniMERNet/models
# å•ç‹¬ä¸‹è½½æ¨¡å‹å’Œåˆ†è¯å™¨æˆ–ä½¿ç”¨ git-lfs
git lfs install
git clone https://huggingface.co/wanderkid/unimernet_base  # 1.3GB  
git clone https://huggingface.co/wanderkid/unimernet_small # 773MB  
git clone https://huggingface.co/wanderkid/unimernet_tiny  # 441MB  

# ä½ ä¹Ÿå¯ä»¥ä» ModelScope ä¸‹è½½æ¨¡å‹
git clone https://www.modelscope.cn/wanderkid/unimernet_base.git
git clone https://www.modelscope.cn/wanderkid/unimernet_small.git
git clone https://www.modelscope.cn/wanderkid/unimernet_tiny.git
```

### å®‰è£…

> æ–°å»ºä¸€ä¸ªå¹²å‡€çš„condaç¯å¢ƒ

``` bash 
conda create -n unimernet python=3.10

conda activate unimernet
```

> å®‰è£…æ–¹å¼1ï¼šç›´æ¥ pip installå®‰è£…ï¼Œé€‚åˆä¸€èˆ¬ç”¨æˆ·
```bash
pip install --upgrade unimernet

pip install "unimernet[full]"
```

> å®‰è£…æ–¹å¼2ï¼šæœ¬åœ°å®‰è£…ï¼Œé€‚åˆå¼€å‘è€…
```bash
pip install -e ."[full]"
```


### è¿è¡Œ UniMERNet

1. **Streamlit åº”ç”¨ç¨‹åº**ï¼šä½¿ç”¨æˆ‘ä»¬çš„åŸºäº Streamlit çš„ GUI è¿›è¡Œäº¤äº’å’Œç”¨æˆ·å‹å¥½çš„ä½“éªŒã€‚æ­¤åº”ç”¨ç¨‹åºå…è®¸å®æ—¶å…¬å¼è¯†åˆ«å’Œæ¸²æŸ“ã€‚

    ```bash
    unimernet_gui
    ```
    ç¡®ä¿ä½ å·²å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ UniMERNet (`pip install --upgrade unimernet & pip install "unimernet[full]"`) ä»¥ä½¿ç”¨ Streamlit GUI åº”ç”¨ç¨‹åºã€‚

2. **å‘½ä»¤è¡Œæ¼”ç¤º**ï¼šä»å›¾åƒä¸­é¢„æµ‹ LaTeX ä»£ç ã€‚

    ```bash
    python demo.py
    ```

3. **Jupyter Notebook æ¼”ç¤º**ï¼šä»å›¾åƒä¸­è¯†åˆ«å’Œæ¸²æŸ“å…¬å¼ã€‚

    ```bash
    jupyter-lab ./demo.ipynb
    ```

## ä¸ SOTA æ–¹æ³•çš„æ€§èƒ½æ¯”è¾ƒï¼ˆBLEUï¼‰ã€‚

> UniMERNet åœ¨è¯†åˆ«çœŸå®ä¸–ç•Œæ•°å­¦è¡¨è¾¾å¼æ–¹é¢æ˜¾è‘—ä¼˜äºä¸»æµæ¨¡å‹ï¼Œåœ¨ç®€å•æ‰“å°è¡¨è¾¾å¼ï¼ˆSPEï¼‰ã€å¤æ‚æ‰“å°è¡¨è¾¾å¼ï¼ˆCPEï¼‰ã€å±å¹•æˆªå›¾è¡¨è¾¾å¼ï¼ˆSCEï¼‰å’Œæ‰‹å†™è¡¨è¾¾å¼ï¼ˆHWEï¼‰æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œå¦‚ BLEU åˆ†æ•°è¯„ä¼°æ‰€ç¤ºã€‚

![BLEU](./asset/papers/fig1_bleu.jpg)

## ä¸ SOTA æ–¹æ³•çš„æ€§èƒ½æ¯”è¾ƒï¼ˆCDMï¼‰ã€‚

> ç”±äºå…¬å¼å­˜åœ¨è¡¨è¾¾çš„å¤šæ ·æ€§ï¼Œä½¿ç”¨BLEUæŒ‡æ ‡å¯¹äºä¸åŒæ¨¡å‹å¯¹æ¯”ä¸å…·å¤‡å…¬å¹³æ€§ï¼Œä¸ºæ­¤æˆ‘ä»¬åœ¨ä¸“é—¨é’ˆå¯¹å…¬å¼è¯†åˆ«è®¾è®¡çš„CDMä¸Šè¿›è¡Œè¯„ä¼°ï¼Œæˆ‘ä»¬çš„æ–¹æ³•è¿œè¶…å¼€æºæ¨¡å‹ï¼Œä¸å•†ä¸šè½¯ä»¶Mathpixæ•ˆæœç›¸å½“ï¼ŒCDM@ExpRateæ˜¯æŒ‡å®Œå…¨é¢„æµ‹æ­£ç¡®å…¬å¼å æ¯”ï¼Œå…·ä½“å‚è€ƒ[CDM](https://arxiv.org/pdf/2409.03643)è®ºæ–‡ã€‚

![CDM](./asset/papers/fig2_cdm.jpg)

## ä¸åŒæ–¹æ³•çš„å¯è§†åŒ–ç»“æœã€‚

> UniMERNet åœ¨æŒ‘æˆ˜æ€§æ ·æœ¬çš„è§†è§‰è¯†åˆ«æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä¼˜äºå…¶ä»–æ–¹æ³•ã€‚

![Visualization](https://github.com/opendatalab/VIGC/assets/69186975/6edcac69-5082-43a2-8095-5681b7a707b9)

## UniMER æ•°æ®é›†
### ä»‹ç»
UniMER æ•°æ®é›†æ˜¯ä¸€ä¸ªä¸“é—¨æ”¶é›†çš„é›†åˆï¼Œæ—¨åœ¨æ¨è¿›æ•°å­¦è¡¨è¾¾å¼è¯†åˆ«ï¼ˆMERï¼‰é¢†åŸŸã€‚å®ƒåŒ…æ‹¬å…¨é¢çš„ UniMER-1M è®­ç»ƒé›†ï¼ŒåŒ…å«è¶…è¿‡ä¸€ç™¾ä¸‡ä¸ªå®ä¾‹ï¼Œä»£è¡¨äº†å¤šæ ·ä¸”å¤æ‚çš„æ•°å­¦è¡¨è¾¾å¼ï¼Œä»¥åŠç²¾å¿ƒè®¾è®¡çš„ UniMER æµ‹è¯•é›†ï¼Œç”¨äºåŸºå‡†æµ‹è¯• MER æ¨¡å‹åœ¨çœŸå®ä¸–ç•Œåœºæ™¯ä¸­çš„è¡¨ç°ã€‚æ•°æ®é›†è¯¦æƒ…å¦‚ä¸‹ï¼š

**UniMER-1M è®­ç»ƒé›†ï¼š**
  - æ€»æ ·æœ¬æ•°ï¼š1,061,791 å¯¹ LaTeX-å›¾åƒå¯¹
  - ç»„æˆï¼šç®€æ´å’Œå¤æ‚çš„æ‰©å±•å…¬å¼è¡¨è¾¾çš„å¹³è¡¡æ··åˆ
  - ç›®çš„ï¼šè®­ç»ƒé²æ£’ã€é«˜ç²¾åº¦çš„ MER æ¨¡å‹ï¼Œæé«˜è¯†åˆ«ç²¾åº¦å’Œæ³›åŒ–èƒ½åŠ›

**UniMER æµ‹è¯•é›†ï¼š**
  - æ€»æ ·æœ¬æ•°ï¼š23,757 ä¸ªï¼Œåˆ†ä¸ºå››ç§è¡¨è¾¾å¼ç±»å‹ï¼š
    - ç®€å•æ‰“å°è¡¨è¾¾å¼ï¼ˆSPEï¼‰ï¼š6,762 ä¸ªæ ·æœ¬
    - å¤æ‚æ‰“å°è¡¨è¾¾å¼ï¼ˆCPEï¼‰ï¼š5,921 ä¸ªæ ·æœ¬
    - å±å¹•æˆªå›¾è¡¨è¾¾å¼ï¼ˆSCEï¼‰ï¼š4,742 ä¸ªæ ·æœ¬
    - æ‰‹å†™è¡¨è¾¾å¼ï¼ˆHWEï¼‰ï¼š6,332 ä¸ªæ ·æœ¬
  - ç›®çš„ï¼šåœ¨å„ç§çœŸå®ä¸–ç•Œæ¡ä»¶ä¸‹å¯¹ MER æ¨¡å‹è¿›è¡Œå…¨é¢è¯„ä¼°

### æ•°æ®é›†ä¸‹è½½
ä½ å¯ä»¥ä» [OpenDataLab](https://opendatalab.com/OpenDataLab/UniMER-Dataset)ï¼ˆæ¨èä¸­å›½ç”¨æˆ·ï¼‰æˆ– [HuggingFace](https://huggingface.co/datasets/wanderkid/UniMER_Dataset) ä¸‹è½½æ•°æ®é›†ã€‚

### ä¸‹è½½ UniMER-Test æ•°æ®é›†

ä¸‹è½½ UniMER-1M æ•°æ®é›†å¹¶å°†å…¶è§£å‹åˆ°ä»¥ä¸‹ç›®å½•ï¼š
```bash
./data/UniMER-1M
```

ä¸‹è½½ UniMER-Test æ•°æ®é›†å¹¶å°†å…¶è§£å‹åˆ°ä»¥ä¸‹ç›®å½•ï¼š
```bash
./data/UniMER-Test
```

## è®­ç»ƒ

è¦è®­ç»ƒ UniMERNet æ¨¡å‹ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. **æŒ‡å®šè®­ç»ƒæ•°æ®é›†è·¯å¾„**ï¼šæ‰“å¼€ `configs/train` æ–‡ä»¶å¤¹å¹¶è®¾ç½®ä½ çš„è®­ç»ƒæ•°æ®é›†è·¯å¾„ã€‚

2. **è¿è¡Œè®­ç»ƒè„šæœ¬**ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¼€å§‹è®­ç»ƒè¿‡ç¨‹ã€‚

    ```bash
    bash script/train.sh
    ```

### æ³¨æ„ï¼š
- ç¡®ä¿ `configs/train` æ–‡ä»¶å¤¹ä¸­æŒ‡å®šçš„æ•°æ®é›†è·¯å¾„æ˜¯æ­£ç¡®ä¸”å¯è®¿é—®çš„ã€‚
- ç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä»»ä½•é”™è¯¯æˆ–é—®é¢˜ã€‚

## æµ‹è¯•

è¦æµ‹è¯• UniMERNet æ¨¡å‹ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. **æŒ‡å®šæµ‹è¯•æ•°æ®é›†è·¯å¾„**ï¼šæ‰“å¼€ `configs/val` æ–‡ä»¶å¤¹å¹¶è®¾ç½®ä½ çš„æµ‹è¯•æ•°æ®é›†è·¯å¾„ã€‚

2. **è¿è¡Œæµ‹è¯•è„šæœ¬**ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¼€å§‹æµ‹è¯•è¿‡ç¨‹ã€‚

    ```bash
    bash script/test.sh
    ```

### æ³¨æ„ï¼š
- ç¡®ä¿ `configs/val` æ–‡ä»¶å¤¹ä¸­æŒ‡å®šçš„æ•°æ®é›†è·¯å¾„æ˜¯æ­£ç¡®ä¸”å¯è®¿é—®çš„ã€‚
- `test.py` è„šæœ¬å°†ä½¿ç”¨æŒ‡å®šçš„æµ‹è¯•æ•°æ®é›†è¿›è¡Œè¯„ä¼°ã€‚è®°å¾—å°† `test.py` ä¸­çš„æµ‹è¯•é›†è·¯å¾„æ›´æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„ã€‚
- æŸ¥çœ‹æµ‹è¯•ç»“æœä»¥è·å–æ€§èƒ½æŒ‡æ ‡å’Œæ½œåœ¨é—®é¢˜ã€‚

## æ•°å­¦å…¬å¼æ£€æµ‹æ•™ç¨‹

å…¬å¼è¯†åˆ«çš„å‰ææ˜¯æ£€æµ‹ PDF æˆ–ç½‘é¡µæˆªå›¾ä¸­å…¬å¼æ‰€åœ¨çš„åŒºåŸŸã€‚[PDF-Extract-Kit](https://github.com/opendatalab/PDF-Extract-Kit) åŒ…å«äº†ä¸€ä¸ªå¼ºå¤§çš„å…¬å¼æ£€æµ‹æ¨¡å‹ã€‚å¦‚æœä½ å¸Œæœ›è‡ªè¡Œè¿›è¡Œå…¬å¼æ£€æµ‹å’Œè¯†åˆ«ï¼Œå¯ä»¥å‚è€ƒ [å…¬å¼æ£€æµ‹æ•™ç¨‹](./MFD/README.md) ä»¥è·å–æœ‰å…³éƒ¨ç½²å’Œä½¿ç”¨å…¬å¼æ£€æµ‹æ¨¡å‹çš„æŒ‡å—ã€‚

## å¾…åŠäº‹é¡¹
 [âœ…] å‘å¸ƒ UniMERNet çš„æ¨ç†ä»£ç å’Œæ¨¡å‹ã€‚  
 [âœ…] å‘å¸ƒ UniMER-1M å’Œ UniMER-Testã€‚  
 [âœ…] å¼€æº Streamlit å…¬å¼è¯†åˆ« GUI åº”ç”¨ç¨‹åºã€‚  
 [âœ…] å‘å¸ƒ UniMERNet çš„è®­ç»ƒä»£ç ã€‚  


## å¼•ç”¨
å¦‚æœä½ åœ¨ç ”ç©¶ä¸­å‘ç°æˆ‘ä»¬çš„æ¨¡å‹/ä»£ç /è®ºæ–‡æœ‰ç”¨ï¼Œæ¬¢è¿ç»™æˆ‘ä»¬é¡¹ç›®ç‚¹ä¸ª â­ å¹¶å¼•ç”¨æˆ‘ä»¬çš„å·¥ä½œ ğŸ“ï¼Œè°¢è°¢ :)
```bibtex
@misc{wang2024unimernetuniversalnetworkrealworld,
      title={UniMERNet: A Universal Network for Real-World Mathematical Expression Recognition}, 
      author={Bin Wang and Zhuangcheng Gu and Guang Liang and Chao Xu and Bo Zhang and Botian Shi and Conghui He},
      year={2024},
      eprint={2404.15254},
      archivePrefix={arXiv},
      primaryClass={cs.CV},
      url={https://arxiv.org/abs/2404.15254}, 
}

@misc{wang2024cdmreliablemetricfair,
      title={CDM: A Reliable Metric for Fair and Accurate Formula Recognition Evaluation}, 
      author={Bin Wang and Fan Wu and Linke Ouyang and Zhuangcheng Gu and Rui Zhang and Renqiu Xia and Bo Zhang and Conghui He},
      year={2024},
      eprint={2409.03643},
      archivePrefix={arXiv},
      primaryClass={cs.CV},
      url={https://arxiv.org/abs/2409.03643}, 
}
```

## è‡´è°¢
- [VIGC](https://github.com/opendatalab/VIGC)ã€‚æ¨¡å‹æ¡†æ¶ä¾èµ–äº VIGCã€‚
- [Texify](https://github.com/VikParuchuri/texify)ã€‚ä¸€ä¸ªä¸»æµçš„ MER ç®—æ³•ï¼ŒUniMERNet çš„æ•°æ®å¤„ç†å‚è€ƒäº† Texifyã€‚
- [Latex-OCR](https://github.com/lukas-blecher/LaTeX-OCR)ã€‚å¦ä¸€ä¸ªä¸»æµçš„ MER ç®—æ³•ã€‚
- [Donut](https://huggingface.co/naver-clova-ix/donut-base)ã€‚UniMERNet çš„ Transformer ç¼–ç å™¨-è§£ç å™¨å‚è€ƒäº† Donutã€‚
- [Nougat](https://github.com/facebookresearch/nougat)ã€‚åˆ†è¯å™¨ä½¿ç”¨äº† Nougatã€‚

## è”ç³»æˆ‘ä»¬
å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ã€æ„è§æˆ–å»ºè®®ï¼Œè¯·éšæ—¶é€šè¿‡ wangbin@pjlab.org.cn è”ç³»æˆ‘ä»¬ã€‚

## è®¸å¯è¯
[Apache è®¸å¯è¯ 2.0](LICENSE)
